contents:
  #keyring:
  #  - https://packages.wolfi.dev/os/wolfi-signing.rsa.pub
  repositories:
    - /work/packages
    - https://packages.wolfi.dev/os
  packages:
    - busybox
    - ca-certificates-bundle
    - wolfi-base
    - ca-certificates-bundle
    # php packages
    - php-8.1
    - php-8.1-xml
    - php-8.1-curl
    - php-8.1-mysqlnd
    - php-8.1-curl
    - php-8.1-soap
    - php-8.1-mbstring
    - php-8.1-zip
    - php-8.1-bcmath
    - php-8.1-dev
    - php-8.1-ldap
    - php-8.1-pgsql
    - php-8.1-gd
    - php-8.1-fpm
    - php-igbinary
    # python packages
    - python3
    - py3-pip
    - py3-setuptools
    # Base packages:
    - gpg-agent
    - libmcrypt-dev
    - curl
    - zip
    - wget
    - nginx
    - unixodbc-dev
    - gcc
    - cmake
    - libpq-15
    - nodejs
    - npm
    - readline-dev
    # PECL packages
    - php-8.1-pecl-mcrypt
    - php-8.1-pecl-mongodb
    - php-8.1-pecl-raphf
    - php-8.1-pecl-sqlsrv
    # Disable for now, it fails currently when initializing with:
    # PHP Warning:  PHP Startup: Unable to load dynamic library 'pdo_sqlsrv' (tried: /usr/lib/php/modules/pdo_sqlsrv (/usr/lib/php/modules/pdo_sqlsrv: cannot open shared object file: No such file or directory), /usr/lib/php/modules/pdo_sqlsrv.so (/usr/lib/php/modules/pdo_sqlsrv.so: undefined symbol: php_pdo_unregister_driver)) in Unknown on line 0
    #- php-8.1-pecl-pdosqlsrv

    # Missing ones so far for php
    # - php-cli
    # - php-sqllite
    # - php-interbase
    # - php-sybase
    # - php-odbc
    # - php-http
    # Missing base packages:
    # - software-properties-common
    # - cron  # This is installed by busybox
    # - unzip # This is installed by busybox
    # - lsof  # This is installed by busybox
    # - mcrypt
    # - sudo
    # - build-essential

accounts:
  groups:
    - groupname: nonroot
      gid: 65532
  users:
    - username: nonroot
      uid: 65532
      gid: 65532
  run-as: 65532

entrypoint:
  command: /usr/bin/php
cmd: --help

